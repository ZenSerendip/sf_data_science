# Проект 0. Анализ резюме из HeadHunter

## Оглавление  
[1. Исследование структуры данных](.README.md#Исследование-структуры-данных)  
[2. Преобразование данных](.README.md#Преобразование-данных)  
[3. Исследование зависимостей в данных](.README.md#Исследование-зависимостей-в-данных)  
[4. Очистка данных](.README.md#Очистка-данных)  


### Исследование структуры данных 

Открываем файл с данными о резюме с HeadHunter и проводим первичный анализ содержащейся в нем информации. Знакомимся с признаками и структурой данных.

:arrow_up: [к оглавлению](./README.md#Оглавление)


### Преобразование данных 

Выплняем преобразование имеющихся данных в нужный нам формат, извлекаем нужную информацию, по которй будем проводить анализ.

**Признак "Образование и ВУЗ":**  

Данные в колонке "Образование и ВУЗ" представленны в виде: <Уровень образования год выпуска ВУЗ специальность...>. 
Например:
- Высшее образование 2016 Московский авиационный институт (национальный исследовательский университет)...
- Неоконченное высшее образование 2000 Балтийская государственная академия рыбопромыслового флота… 

Нам нужен только уровень образования. Создаем с помощью функции-преобразования новый признак "Образование", который будет 4 категории: "высшее", "неоконченное высшее", "среднее специальное" и "среднее".

:arrow_up: [к оглавлению](./README.md#Оглавление)

**Признак "Пол, возраст":**

Данные в колонке "Пол, возраст" представленны в виде: <Пол , возраст , дата рождения>. 
Например:
- Мужчина , 39 лет , родился 27 ноября 1979
- Женщина , 21 год , родилась 13 января 2000

Нам необходимо выделить каждый параметр в отдельный столбец. Создем два новых признака: 
- "Пол", в котором будут 2 уникальных строковых значения: 'М' - мужчина, 'Ж' - женщина
- "Возраст", значение которого будет представлено целыми числами.

:arrow_up: [к оглавлению](./README.md#Оглавление)

**Признак "Опыт работы":**

Данные в колонке "Опыт работы" представленны в виде: <Опыт работы: n лет m месяцев, периоды работы в различных компаниях…>. 
Из столбца нам необходимо выделить общий опыт работы соискателя в месяцах, который занесем в новый признак "Опыт работы (месяц)".

При решении задачи необходимо учесть несколько особенностей:

1. В признаке "Опыт работы" есть пропуски. Если мы встречаем пропуск, оставляем его как есть (функция-преобразование возвращает NaN)
2. В признаке "Опыт работы" есть скрытые пропуски. Для некоторых соискателей в столбце стоит значения "Не указано". Их тоже обозначим как NaN (функция-преобразование возвращает NaN)
3. Нас не интересует информация, которая описывается после указания опыта работы (периоды работы в различных компаниях)
4. Сложность задачи: опыт работы может быть представлен только в годах или только месяцах. Например, можно встретить следующие варианты:
    - Опыт работы 3 года 2 месяца…
    - Опыт работы 4 года…
    - Опыт работы 11 месяцев…
    - Учитывайте эту особенность в вашем коде

:arrow_up: [к оглавлению](./README.md#Оглавление)

**Признак "Город, переезд, командировки":**

Данные в колонке "Город, переезд, командировки" представленны в виде: <Город , (метро) , готовность к переезду (города для переезда) , готовность к командировкам>. В скобках указаны необязательные параметры строки. 
Например, можно встретить следующие варианты:
- Москва , не готов к переезду , готов к командировкам
- Москва , м. Беломорская , не готов к переезду, не готов к командировкам
- Воронеж , готов к переезду (Сочи, Москва, Санкт-Петербург) , готов к командировкам

Создадим отдельные признаки "Город", "Готовность к переезду", "Готовность к командировкам". При этом важно учесть:
1. Признак "Город" должен содержать только 4 категории: "Москва", "Санкт-Петербург" и "город-миллионник" (их список ниже), остальные обозначьте как "другие".
Список городов-миллионников:

<code>million_cities = ['Новосибирск', 'Екатеринбург','Нижний Новгород','Казань', 'Челябинск','Омск', 'Самара', 'Ростов-на-Дону', 'Уфа', 'Красноярск', 'Пермь', 'Воронеж','Волгоград']</code>

Инфорация о метро, рядом с которым проживает соискатель нас не интересует.

2. Признак "Готовность к переезду" должен иметь два возможных варианта: True или False. 
Возможны несколько вариантов описания готовности к переезду в признаке "Город, переезд, командировки". Например:
- … , готов к переезду , …
- … , не готова к переезду , …
- … , готова к переезду (Москва, Санкт-Петербург, Ростов-на-Дону)
- … , хочу переехать (США) , …
Нас интересует только сам факт возможности или желания переезда.

3. Признак "Готовность к командировкам" должен иметь два возможных варианта: True или False. Возможны несколько вариантов описания готовности к командировкам в признаке "Город, переезд, командировки". Например:
- … , готов к командировкам , …
- … , готова к редким командировкам , …
- … , не готов к командировкам , …
Нас интересует только сам факт готовности к командировке.

Еще один важный факт: при выгрузки данных у некоторых соискателей "потерялась" информация о готовности к командировкам. Поо умолчанию считаем, что такие соискатели не готовы к командировкам.

:arrow_up: [к оглавлению](./README.md#Оглавление)

**Признаки "Занятость" и "График":**

Данные признаки представляют собой набор категорий желаемой занятости (полная занятость, частичная занятость, проектная работа, волонтерство, стажировка) и желаемого графика работы (полный день, сменный график, гибкий график, удаленная работа, вахтовый метод).

Создадим признаки-мигалки для каждой категории с помощью метод преобразования категориальных признаков "One Hot Encoding": если категория присутствует в списке желаемых соискателем, то в столбце на месте строки рассматриваемого соискателя ставится True, иначе - False.

:arrow_up: [к оглавлению](./README.md#Оглавление)

**Признаки "ЗП":**

Помимо желаемой заработной платы соискатель указывает валюту, в которой он бы хотел ее получать, например:
30000 руб.
50000 грн.
550 USD

Нам необходимо представить заработную плату в единой валюте - в рублях. 
Воспользуемся специальному интернет-ресурсу MDF.RU для получения данных о курсе в виде текстовых файлов. Экспортируем данные о курсах различных валют в виде csv файлов и подгружаем в наш проект.

Алгоритм преобразования валют:

1. Переводим признак "Обновление резюме" из таблицы с резюме в формат datetime и достаем из него дату. В тот же формат приводим признак "date" из таблицы с валютами.
2. Выделяем из столбца "ЗП" сумму желаемой заработной платы и наименование валюты, в которой она исчисляется. Наименование валюты переводим в стандарт ISO согласно с таблицей о курсах.
3. Присоединям к таблице с резюме таблицу с курсами по столбцам с датой и названием валюты. Значение close для рубля заполняем единицей 1 (курс рубля самого к себе)
4. Умножаем сумму желаемой заработной платы на присоединенный курс валюты (close) и делим на пропорцию (после объединения пропуски в столбце "proportion" заполняем единицей 1), результат занести в новый столбец "ЗП (руб)".

:arrow_up: [к оглавлению](./README.md#Оглавление)

### Исследование зависимостей в данных

Строим визуализацию данных:
1. Распределение признака "Возраст"
2. Распределение признака "Опыт работы (месяц)"
3. Распределение признака "ЗП (руб)"
4. Диаграмма, которая показывает зависимость медианной желаемой заработной платы ("ЗП (руб)") от уровня образования ("Образование")
5. Диаграмма, которая показывает распределение желаемой заработной платы ("ЗП (руб)") в зависимости от города ("Город")
6. Многоуровневая столбчатая диаграмма, которая показывает зависимость медианной заработной платы ("ЗП (руб)") от признаков "Готовность к переезду" и "Готовность к командировкам"
7. Строим сводную таблицу, иллюстрирующую зависимость медианной желаемой заработной платы от возраста ("Возраст") и образования ("Образование"). На полученной сводной таблице строим тепловую карту.
8. Диаграмма рассеяния, показывающую зависимость опыта работы ("Опыт работы (месяц)") от возраста ("Возраст")
  
:arrow_up: [к оглавлению](./README.md#Оглавление)


### Очистка данных

1. Проводим отчистку данных от полных дубликатов.
2. Удаляем строки, где есть пропуск в столбцах "Последнее/нынешнее место работы" и "Последняя/нынешняя должность". Пропуски в столбце "Опыт работы (месяц)" заполняем медианным значением.
3. Удаляем выброс: 
    - строки, в которых указана заработная плата либо выше 1 млн. рублей, либо ниже 1 тыс. рублей
    - строки, в которых опыт работы в годах превышал возраст соискателя
    - в признаке "Возраст". Строим распределение признака в логарифмическом масштабе, добавляем линии, отображающие среднее и границы интервала метода трех сигм. Находим выбросы с помощью метода z-отклонения и удаляем их из данных, используйте логарифмический масштаб. Делаем послабление на 1 сигму (берем 4 сигмы) в правую сторону.

:arrow_up: [к оглавлению](.README.md#Оглавление)

